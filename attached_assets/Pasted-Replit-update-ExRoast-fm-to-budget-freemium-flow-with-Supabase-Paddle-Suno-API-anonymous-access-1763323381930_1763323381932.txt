Replit, update ExRoast.fm to budget freemium flow with Supabase + Paddle + Suno API—anonymous access everywhere, no login gate. Refine for templates on free, personalization on pro. Build on current UI:

1. **Pre-Gen Templates Setup**: Assume 20 MP3 templates in Supabase storage (e.g., 'petty_ghosting.mp3', 'glowup_cheating.mp3'—genres/moods mapped). On free gen: User story/mode → Run Python script (fuzzywuzzy or difflib) to match keywords (e.g., 'ghost' → 'ghosting' template). Score top match, trim to 15s preview (fluent-ffmpeg), add watermark "Full at ExRoast.fm".

2. **Anonymous Full Access**: All pages open (hero/input/modes/pricing). User spills tea → picks mode → "Generate My Roast" → If free/anonymous: Template match + 15s preview auto-play (waveform). If pro/subbed: Suno API gen full 35s personalized MP3 from story (prompt: "35s [mode] roast song from [story], Suno style, Cardi B energy, end watermark if free").

3. **Upload for Pro**: Pro-only: Chat screenshot upload → OCR (tesseract.js) extract text → Feed to Suno for hyper-personal lyrics (e.g., "Diss based on: [OCR text]").

4. **Upsell Modal (Post-Preview)**: After any preview: Modal "Template tease slaps? Go Pro for YOUR ex's custom roast ($4.99 one-time full unlock or $12.99/mo unlimited)". Buttons to Paddle. Success: Pro gets uncut MP3 + history save. Highlight diffs: "Free: Fun library templates (quick, mapped to your vibe). Pro: Tailored Suno songs from your story/upload—more relatable, zero robotic, ultra-petty digs!".

5. **Share Feature**: "Share to TikTok" on preview: Create 15s vertical MP4 (9:16, fluent-ffmpeg + canvas): Audio (preview/full if pro) + scrolling gold lyrics (from template/Suno response) + fire emojis on black bg. Free: Watermarked. Pro: Clean + upload to Supabase for share URL.

6. **Supabase + Auth**: npm i @supabase/supabase-js tesseract.js fuzzywuzzy. Init Supabase (URL/key). Tables: 'roasts' (id, user_id, story, mode, audio_url, lyrics); 'subscriptions' (user_id, paddle_id, status). Google OAuth on upsell ("Sign in to save/sub"). Temp localStorage for free history (last 3). "/history": Pro list with play/share.

7. **Paddle Setup**: <script src="https://cdn.paddle.com/paddle/paddle.js"></script>. Paddle.Setup({vendor: 12345, token: 'test_...'}). One-time $4.99 ('full_roast'), sub $12.99/mo ('unlimited_roasts'). Sandbox. Success: Update sub status, deliver full.

8. **Subscription Page Polish**: Add section: "Free vs Pro: Free = Template roasts (generic fun, no API cost). Pro = Personalized Suno bangers (upload chats for real tea, more relatable lyrics, not robotic—your ex's exact crimes roasted fresh). Unlimited + history included."

9. add MP3 template system to ExRoast.fm: 1. Supabase table 'templates' (id, filename, keywords text, mode, mood). 2. On free gen: Query all templates → Fuzzywuzzy match user story keywords (e.g., 'ghost' in story → score 'ghosting' templates). Pick top match, get storage URL, trim 15s preview. 3. Admin insert: /admin form to upload MP3 to Supabase storage + add keywords/mode/mood to table. Test: Fake story "ex cheated" → Matches 'cheating' template. Apply.
Test: Anonymous → Template preview → Share MP4 → Upsell → Fake-pay(paddle billing) → Full Suno gen + OCR upload with teseractjs(like we already have). Mobile-ok, <2s loads. Use Suno API key env. Deploy live. Apply now.